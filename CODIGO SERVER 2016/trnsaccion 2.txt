CREATE PROCEDURE PRUEBA_DOSS
(@PID_FAMLIAR INT, @PID_TIPOSERVICIO INT, @PID_ESPACIO INT, @PFORMADEPAGO_VENTA VARCHAR (30), 
@PFECHAPAGO_VENTA DATE)
AS 
BEGIN 
BEGIN TRY 
BEGIN TRANSACTION 
INSERT INTO VENTA VALUES (@PID_FAMLIAR, @PID_TIPOSERVICIO, @PID_ESPACIO,  @PFORMADEPAGO_VENTA, @PFECHAPAGO_VENTA)
UPDATE SERVICIO SET STOCK_SERVICIO=STOCK_SERVICIO-1 WHERE ID_TIPOSERVICIO=@PID_TIPOSERVICIO;
COMMIT TRANSACTION 
END TRY 
BEGIN CATCH
ROLLBACK TRANSACTION 
RAISERROR ('error',1,2,3,4,5);
END CATCH
END

DELETE FROM VENTA
SELECT * FROM SERVICIO
SELECT * FROM VENTA

execute PRUEBA_DOSS 1,1,2, 'Paypal', '2022/01/22'

alter table servicio DROP stock_servicio ;